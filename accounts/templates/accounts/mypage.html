{% extends "base.html" %}

{% block title %}ãƒã‚¤ãƒšãƒ¼ã‚¸{% endblock %}

{% block content %}
<h2>ãƒã‚¤ãƒšãƒ¼ã‚¸</h2>
<div class="card mb-4 shadow-sm rounded-3">
  <div class="card-body">
    <h5 class="card-title">ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±</h5>
    <p class="card-text mb-1"><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š</strong>{{ request.user.username }}</p>
    <p class="card-text mb-1"><strong>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š</strong>{{ request.user.email|default:"æœªç™»éŒ²" }}</p>

    <a href="{% url 'accounts:password_change' %}" class="btn btn-outline-secondary btn-sm mt-2">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹</a>
  </div>
</div>

<p>ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãŠå­æ§˜ä¸€è¦§ï¼š</p>
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  {% for child in children %}
    <div class="col">
      <div class="card shadow-sm rounded-3 {% if child.id == selected_child_id %}border-primary{% endif %}"
           onclick="location.href='{% url 'accounts:set_select_child' child.id %}'"
           style="cursor: pointer;">
        <div class="card-body position-relative">

          <!-- ç·¨é›†ãƒ»å‰Šé™¤ã‚¢ã‚¤ã‚³ãƒ³ãƒœã‚¿ãƒ³ -->
          <div class="position-absolute top-0 end-0 m-2">
            <a href="{% url 'accounts:child_edit' child.id %}" class="btn btn-sm btn-outline-secondary me-1" onclick="event.stopPropagation();">
              âœ
            </a>
            <a href="{% url 'accounts:child_delete' child.id %}" class="btn btn-sm btn-outline-danger" onclick="event.stopPropagation();">
              ğŸ—‘
            </a>
          </div>

          <!-- å­ä¾›æƒ…å ± -->
          <h5 class="card-title">
            {{ child.name }}
            {% if child.id == selected_child_id %}
              <span class="badge bg-primary ms-2">é¸æŠä¸­</span>
            {% endif %}
          </h5>
          <p class="card-text mb-1"><strong>èª•ç”Ÿæ—¥ï¼š</strong>{{ child.birthday }}</p>
          <p class="card-text mb-1"><strong>æ€§åˆ¥ï¼š</strong>{{ child.get_gender_display|default:"æœªç™»éŒ²" }}</p>
          <p class="card-text mb-1"><strong>ã”åˆ©ç”¨ä¸­ã®å¡¾ï¼š</strong>{{ child.juku|default:"æœªç™»éŒ²" }}</p>

        </div>
      </div>
    </div>
  {% empty %}
    <p>ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãŠå­ã•ã¾ãŒã„ã¾ã›ã‚“ã€‚</p>
  {% endfor %}
</div>

<div class="text-center mt-4">
    <a href="{% url 'accounts:child_add' %}" class="btn btn-success">ãŠå­æ§˜ã‚’è¿½åŠ </a>
</div>

{% endblock %}
